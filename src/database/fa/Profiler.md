# \<Profiler>

### `<Profiler>`

::: rtl
یک درخت‌واره از کامپوننت‌ها (component tree) را در `<Profiler>` بپیچانید (weap) تا بازدهی نمایش (rendering performance) آن را بسنجید (measure).
:::

``` jsx
<Profiler id="App" onRender={onRender}>
  <App />
</Profiler>
```

::: rtl
### ویژگی‌ها

* `id: شناسه`: یک رشته که شناساگر (identifier) بخشی از رابط کاربری (UI) است که در حال سنجش آن هستید.

* `onRender: هنگام_نمایش`: یک تابع پاسخی (callback) است که ری‌اکت هر زمانی که کامپوننت‌های داخل درخت‌واره‌ی در حال پایش به روز رسانی می‌شوند، فراخوانی می‌کند. این تابع اطلاعاتی درباره‌ی اینکه چه چیزی نمایش داده شده (rendered) و چقدر نمایش دادن آن طول کشیده، دریافت می‌کند.

## هشدارها

* پایش (profiling) مقداری سربار اجرایی اضافه خواهد کرد، از این سو به صورت پیش‌فرض در تولید نهایی (production build) غیرفعال است. برای فعال کردن پایش تولید نهایی، باید یک تولید نهایی ویژه که پایش در آن فعال است را فعال کنید.

***

### تابع پاسخی `هنگام_نمایش` (`onRender` callback)

ری‌اکت `onRender` شما را با اطلاعاتی درباره‌ی اینکه چه چیزی نمایش داده شده، فراخوانی خواهد کرد.
:::

``` jsx
function onRender(id, phase, actualDuration, baseDuration, startTime, commitTime) {
  // جمع آوری یا گزارش زمان‌بندی‌های نمایش ...
}
```

::; rtl
### پارامترها

* `id: شناسه`: رشته‌ی ویژگی شناسه‌ی درخت‌واره‌ی `<Profiler>` ای که در این لحظه به کاربر نمایش داده شده است (committed: سومین و آخرین مرحله از مسیری که کامپوننت برای نمایش طی می‌کند). این پارامتر به شما امکان شناسایی بخشی از درخت‌واره را که در حال نمایش است، می‌دهد، اگر از چند پایش‌گر استفاده می‌کنید.

* `phase: فاز`: می‌تواند `"mount"`، `"update"` یا `"nested-update"` باشد. با استفاده از این پارامتر می‌توانید بفهمید که این درخت‌واره برای اولین بار  سوار شده (mounted)، یا به دلیل تغییر در ویژگی‌ها، وضعیت یا قلاب‌ها بازنمایی شده.

* `actualDuration: مدت_واقعی`: مدت زمانی (به میلی ثانیه) که صرف نمایش `<Profiler>` و  فرزندان (descendants) آن در این به روز رسانی شده است. این پارامتر نشان می‌دهد که زیردرخت فعلی چقدر خوب از به یاد سپاری (memoization) استفاده می‌کند (به عنوان مثال `memo` و `useMemo`). در حالت ایده‌آل، این پارامتر باید به اندازه‌ی قابل توجهی بعد از سوار شدن اولیه (initial mount) کاهش پیدا کند، زیرا تعداد زیادی از فرزندانش فقط زمانی نیاز به بازنمایی دارند که ویژگی‌های مخصوص به خودشان تغییر کرده باشد.

* `baseDuration: زمان_پایه`: مدت زمانی (به میلی ثانیه) که پیش‌بینی شده بازنمایی کل زیردرخت `<Profiler>` طول بکشد، بدون هیچ گونه بهینه سازی (optimization). این زمان با جمع زدن جدیدترین مدت زمان مورد نیاز برای نمایش هر کامپوننت در درخت‌واره به دست می‌آید. این مقدار، تخمینی برای بدترین حالت هزینه‌ی (worst-case cost) نمایش (مانند سوار شدن اولیه‌ی درخت‌واره بدون هیچ گونه بهینه سازی) است. با مقایسه‌ی این مقدار با `actualDuration`، می‌توان فهمید آیا به یاد سپاری کار می‌کند یا نه.

* `startTime: زمان_شروع`: یک مهر زمانی عددی (numeric timestamp) که نمایان‌گر زمانی است که ری‌اکت فرآیند نمایش این به روز رسانی خاص را شروع کرده است.

* `commitTime: زمان_نمایش_نهایی`: یک مهر زمانی عددی که نمایان‌گر زمانی است که ری‌اکت فرآیند نمایش این به روز رسانی خاص را به اتمام رسانده است و کامپوننت‌ها به کاربر نمایش داه شده اند (committed). این مقدار بین همه‌ی پایش‌گرهای یک نمایش نهایی خاص یکسان است، و می‌توان آن‌ها را در صورت نیاز بر اساس این مقدار گروه بندی کرد.
:::
